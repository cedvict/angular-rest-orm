<h1><code ng:non-bindable="">Resource</code>
<div><span class="hint">service in module <code ng:non-bindable="">restOrm</code>
</span>
</div>
</h1>
<div><h2 id="description">Description</h2>
<div class="description"><div class="restorm-resource-page"><h3 id="description_resource">Resource</h3>
<p>Is the base class for RESTful resource models.</p>
<p>Derive from <code>Resource</code> providing proper values for class properties
as described below to define models for your resources.</p>
<p>A very minimal example in JavaScript:</p>
<pre><code class="lang-javascript">var Book = Resource.Subclass({}, {
  urlEndpoint: &#39;/api/books/&#39;,
  idField: &#39;_id&#39;
});</code></pre>
<p>of in CoffeeScript:</p>
<pre><code class="lang-coffeescript">class Book extends Resource
  @.urlEndpoint: &#39;/api/books/&#39;
  @.idField: &#39;_id&#39;</code></pre>
<p>(the <code>.</code> has been added to circumvent an <code>ngdoc</code> bug regarding parsing of <code>@</code> in blockquotes...)</p>
</div></div>
<div class="member method"><h2 id="methods">Methods</h2>
<ul class="methods"><li><h3 id="methods_resource">Resource(data, opts)</h3>
<div class="resource"><div class="resource-page"><h4 id="methods_resource_resource">Resource()</h4>
<p><strong>constructor</strong> for <code>Resource</code></p>
<p>Usually one would never call this constructor direcly, but always through subclasses.</p>
</div><h5 id="methods_resource_resource_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>data <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-object">object</a><a href="" class="label type-hint type-hint-null">null</a></td><td><div class="resource-page"><p>Object that will be used to initialize the resource (model instance)</p>
</div></td></tr><tr><td>opts <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="resource-page"><p>Options</p>
</div></td></tr></tbody></table></div>
</li>
<li><h3 id="methods_$save">$save(opts)</h3>
<div class="$save"><div class="resource-save-page"><p>Saves the resource represented by this model instance.</p>
<p>If the model instance represents a resource obtained from the
remote endpoint (thus having an ID), than the method will update
the remote resource (using an HTTP <code>PUT</code>), otherwise it will create
the resource on the remote endpoint (using an HTTP <code>POST</code>).</p>
<p>The operation will update the model representation with the data
obtained from the remote endpoint.</p>
<p>The HTTP operation will be performed asynchronously, so the <code>$promise</code>
and <code>$promiseDirect</code> promises will be re-generated to inform of the
completion.</p>
<p>For a new resource, the method will cause an http request of the form:</p>
<p>  <code>POST</code> <em>RESOURCE_URL</em> /</p>
<p>otherwise for an existing resource:</p>
<p>  <code>PUT</code> <em>RESOURCE_URL</em> / <em>id</em></p>
<p>Usually this method will be called on a <code>Resource</code> subclass.</p>
</div><h5 id="methods_$save_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>opts <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="resource-save-page"><p>Options object containing optional <code>params</code> and <code>data</code>
fields passed to the respective counterparts of the <code>$http</code> call</p>
</div></td></tr></tbody></table><h5 id="methods_$save_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="resource-save-page"><p>the model instance itself</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_all">All(opts)</h3>
<div class="all"><div class="resource-all-page"><h4 id="methods_all_resourceall">Resource.All</h4>
<p><strong>class method </strong> - fetches and returns all the remote resources.</p>
<p>This method returns a <em>collection</em>, an Array augmented with some
additional properties, as detailed below.</p>
<p>The HTTP fetch will be performed asynchronously, so the collection,
even if returned immediately, will be filled with results in an
incremental fashion.</p>
<p>To allow the user to be notified on the completion of the fetch process,
the collection contains as special properties a couple of promises that
will be fulfilled when the fetch completes.</p>
<p>The first one is named <code>$promise</code>. This will be fulfilled when all
collection items will have been fetched <strong>along with all their relations</strong>
(and the relations of the relations... down to the deepest nesting levels).</p>
<p>The other one is named <code>$promiseDirect</code>. This will be fulfilled when all
collection items will have been fetched, but ignoring relations.</p>
<p>The method will cause an http request of the form:</p>
<p>  <code>GET</code> <em>RESOURCE_URL</em> /</p>
<p>Usually this method will be called on a <code>Resource</code> subclass.</p>
</div><h5 id="methods_all_resourceall_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>opts <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="resource-all-page"><p>Options object containing optional <code>params</code> and <code>data</code>
fields passed to the respective counterparts of the <code>$http</code> call</p>
</div></td></tr></tbody></table><h5 id="methods_all_resourceall_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="resource-all-page"><p>fetched collection (augmented array of model instances)</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_create">Create(data, opts)</h3>
<div class="create"><div class="resource-create-page"><h4 id="methods_create_resourcecreate">Resource.Create()</h4>
<p><strong>class method </strong> - creates a model resource (instance) and persists it on the remote side.</p>
<p>Usually this method will be called on a <code>Resource</code> subclass.</p>
</div><h5 id="methods_create_resourcecreate_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>data <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-data">data</a><a href="" class="label type-hint type-hint-null">null</a></td><td><div class="resource-create-page"><p>Object used to initialize the new model instance properties</p>
</div></td></tr><tr><td>opts <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="resource-create-page"><p>Options passed to <code>$save()</code></p>
</div></td></tr></tbody></table><h5 id="methods_create_resourcecreate_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="resource-create-page"><p>newly created resource (model instance)</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_get">Get(id, opts)</h3>
<div class="get"><div class="resource-get-page"><h4 id="methods_get_resourceget">Resource.Get</h4>
<p><strong>class method </strong> - fetches and returns a resource with the given id.</p>
<p>A model instance for the resource is constructed and returned, and it
will be populated with the contents fetched from the remote endpoint
for the resource with the specified <code>id</code>.</p>
<p>The HTTP fetch will be performed asynchronously, so the model instance,
even if returned immediately, will be populated in an
incremental fashion.</p>
<p>To allow the user to be notified on the completion of the fetch process,
the model instance contains as special properties a couple of promises that
will be fulfilled when the fetch completes.</p>
<p>The first one is named <code>$promise</code>. This will be fulfilled when
the resource will have been fetched <strong>along with all its relations</strong>
(and the relations of the relations... down to the deepest nesting levels).</p>
<p>The other one is named <code>$promiseDirect</code>. This will be fulfilled when the
resource will have been fetched, but ignoring relations.</p>
<p>The method will cause an http request of the form:</p>
<p>  <code>GET</code> <em>RESOURCE_URL</em> / <em>id</em></p>
<p>Usually this method will be called on a <code>Resource</code> subclass.</p>
</div><h5 id="methods_get_resourceget_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>id</td><td><a href="" class="label type-hint type-hint-number">Number</a><a href="" class="label type-hint type-hint-string">String</a></td><td><div class="resource-get-page"><p>Remote endpoint id of the resource to fetch</p>
</div></td></tr><tr><td>opts <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="resource-get-page"><p>Options object containing optional <code>params</code> and <code>data</code>
fields passed to the respective counterparts of the <code>$http</code> call</p>
</div></td></tr></tbody></table><h5 id="methods_get_resourceget_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="resource-get-page"><p>fetched resource (model instance)</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_subclass">Subclass(instances, statics)</h3>
<div class="subclass"><div class="resource-subclass-page"><h4 id="methods_subclass_resourcesubclass">Resource.Subclass()</h4>
<p><strong>class method</strong> that returns a new subclass derived from <code>Resource</code>
extended with the specified instance and class properties.</p>
<p>This method is intended to be used from plain <em>JavaScript</em>.</p>
<p><em>CoffeeScript</em> users should rely on the native <code>class ... extends ...</code> syntax
to create <code>Resource</code> subclasses.</p>
</div><h5 id="methods_subclass_resourcesubclass_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>instances</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="resource-subclass-page"><p>Properties to add to instances of the newly created class</p>
</div></td></tr><tr><td>statics</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="resource-subclass-page"><p>Class properties of the newly created class</p>
</div></td></tr></tbody></table><h5 id="methods_subclass_resourcesubclass_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-function">function</a></td><td><div class="resource-subclass-page"><p>the new class (a constructor function)</p>
</div></td></tr></table></div>
</li>
</ul>
</div>
<div class="member property"><h2 id="properties">Properties</h2>
<ul class="properties"><li><h3 id="properties_defaults">defaults</h3>
<div class="defaults"><div class="-defaults-page"><h4 id="properties_defaults_defaults">defaults</h4>
<p><strong>class property</strong> - (optional) object specifying default values for resource fields.
It is meant to be an easy shortcut for those cases where the <code>fields</code> complexity is
not needed.</p>
<p>This property is intended to be specified on subclasses of <code>Resource</code>.</p>
</div></div>
</li>
<li><h3 id="properties_fields">fields</h3>
<div class="fields"><div class="-fields-page"><h4 id="properties_fields_fields">fields</h4>
<p><strong>class property</strong> - (optional) object specifying names and kinds of resource fields.</p>
<p>It&#39;s possible to specify an entry for each field, with this form:</p>
<pre><code class="lang-javascript">{
  ...
  NAME: {
     default: DEFAULT_VALUE,
     remote: REMOTE_FIELD_NAME,
     type: FIELD_TYPE,
     model: RELATED_MODEL
  },
  ...
}</code></pre>
<p>where:</p>
<ul>
<li><em>NAME</em> is the field name as used on the resource (model instance). This can be
different from the remote endpoint field name.</li>
<li><em>DEFAULT_VALUE</em> is the default value for the field, used if the remote doesn&#39;t
provide a value or when creating a resource without specifying all fields</li>
<li><em>REMOTE_FIELD_NAME</em> is the (optional) field name on the remote endpoint. If not
specified, it&#39;s assumed to be the same as <em>NAME</em></li>
<li><em>FIELD_TYPE</em> at this time is used only to specify relations. If specified can
be <code>Resource.Reference</code> or <code>Resource.ManyToMany</code></li>
<li><em>RELATED_MODEL</em> used only for relations, specifies the related model (must be a
<code>Resource</code> subclass)</li>
</ul>
<p>All of the entry object fields are optional.</p>
<p>If <code>fields</code> is not specified, fields will be fetched and copied between
responses and resource models as-is.</p>
<p>This property is intended to be specified on subclasses of <code>Resource</code>.</p>
</div></div>
</li>
<li><h3 id="properties_idfield">idField</h3>
<div class="idfield"><div class="-idfield-page"><h4 id="properties_idfield_idfield">idField</h4>
<p><strong>class property</strong> - (optional) the name of the field containing the ID of the resource in
remote endpoint responses.</p>
<p>Defaults to <code>id</code>.</p>
<p>This property is intended to be specified on subclasses of <code>Resource</code>.</p>
</div></div>
</li>
<li><h3 id="properties_urlendpoint">urlEndpoint</h3>
<div class="urlendpoint"><div class="-urlendpoint-page"><h4 id="properties_urlendpoint_urlendpoint">urlEndpoint</h4>
<p><strong>class property</strong> - the base URL for the resource.</p>
<p>The final base URL will have the form</p>
<pre><code>`urlPrefix` / `urlEndpoint`</code></pre>
<p>(Note that slashes will be added only where necessary)</p>
<p>This property is intended to be specified on subclasses of <code>Resource</code>.</p>
</div></div>
</li>
<li><h3 id="properties_urlprefix">urlPrefix</h3>
<div class="urlprefix"><div class="-urlprefix-page"><h4 id="properties_urlprefix_urlprefix">urlPrefix</h4>
<p><strong>class property</strong> - prefix that will be prepended to all URLs
for this resource.
Defaults to the empty string (in this case, nothing will be prepended).</p>
<p>The final base URL will have the form</p>
<pre><code>`urlPrefix` / `urlEndpoint`</code></pre>
<p>(Note that slashes will be added only where necessary)</p>
<p>This property is intended to be specified on subclasses of <code>Resource</code>.</p>
</div></div>
</li>
</ul>
</div>
</div>
